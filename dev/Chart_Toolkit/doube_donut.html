<html>
<head><title>double donut</title></head>
<body>
<!-- Maps JS/CSS -->

	<script type="text/javascript" src="protovis/protovis.min.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.min.js"></script>
	<script type="text/javascript" src="js/protoSlider.js"></script>

	<script type="text/javascript" src="js/protoSliderBar.js"></script>
	<script type="text/javascript" src="js/protoSliderDonut.js"></script>
	<meta charset="utf-8"></meta>
<link rel="stylesheet" href="css/jquery-ui-1.8.15.custom2.css">
<style>
	#chart { margin-right: auto; margin-left: auto; }
	#wrapper { width: 500px; min-height: 400px; margin-left: auto; margin-right: 35em;  border: 0px inset white; color: #000; font-weight: bold; }
	#sliderwrap { width: 400px; margin-left: auto; margin-right: -2em; }
	#slidercontrol { margin-right: -15em; width: 150px; float: right; cursor: pointer; margin-top: 1.5em;}
	#sliderlabels { margin-top: .2em; margin-right: .1em; }
	#addbars { width: 150px; float: right; margin-left: auto; margin-right:-0.8em; }
	#addbars input { padding: 5px; color: #fff; background-color: #000; border: 1px solid black; font-weight: bold; cursor: pointer; }
	input.slider { border:0; color:#f6931f; font-weight:bold; }
</style>

<script type="text/javascript">
	

	var visSlide;
	var maxBars = 8; var m = 3;
   
  data11 = genData(maxBars, m);

  //Generate randomized data or use the static sampleChart and SampleDonut arrays 

   var data = new Object;
   data[2010] = genData(maxBars, m); data[2011] = genData(maxBars, m); data[2012] = genData(maxBars, m);
   data[2013] = genData(maxBars, m);
   
   //var datakeys = new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P");
   var datakeys = new Array("14-18","19-21","22-24","25-34","35-44","45-54","55-64","65-99");

   var sampleChart = {
	   "2010":[[764.0840598614886,1410.090156365186,4202.549017500132],[2187.598670250736,1160.7372458092868,3858.163459226489],[4132.76451244019,454.97489778790623,1165.7911572838202],[1726.82415030431,844.09500437323,3260.1727733854204],[507.95340829063207,326.04380941484123,1893.5651803622022],[1289.1855355119333,1150.4885345930234,3120.8075755275786],[2645.8522060420364,4231.107777217403,3345.600036671385],[1262.4953188933432,8.78653849940747,3596.610074630007]],
	   "2011":[[489.59440633188933,2247.0762873999774,1372.4055932834744],[4463.172173243947,1121.2421675445512,3527.392112882808],[2849.7435942990705,3647.5197554100305,2090.9539981512353],[4196.295161149465,3033.4515661234036,3904.6820474322885],[2764.887851080857,2824.0394038148224,3333.429565653205],[1161.4083303138614,2889.1014670953155,3350.2841742010787],[159.18459661770612,39.69457803759724,319.5827775634825],[1514.1952807316557,2795.2694138512015,1013.214515754953]],
	   "2012":[[1089.3385936506093,197.5389429135248,2224.811666412279],[2246.681407559663,620.5024755327031,2289.915645495057],[1445.1704265084118,1716.213988373056,1578.9088297169656],[812.2350394260138,4331.397290574387,3000.9261053055525],[289.4319025799632,300.8699136553332,1655.6077867280692],[473.38520747143775,575.6746366387233,4175.380286411382],[4486.853401875123,971.01129591465,2390.7770697260275],[140.34195675048977,3422.009986708872,2760.6505444273353]],
	   "2013":[[2667.2608943190426,1488.8625657185912,3428.0005119508132],[3867.3497264971957,3565.3337007388473,1628.593955305405],[3700.2257534768432,2439.238215330988,294.00292318314314],[1022.2975148353726,1755.0101521192119,70.15322393272072],[757.4749920750037,2789.4262686604634,2778.800064814277],[2.235017716884613,1798.299821675755,1224.3680100655183],[3290.6921503599733,837.0679792715237,3681.016698712483],[2223.9317876519635,2711.728970403783,3608.099057106301]]};

  var sampleDonut = {
		   "2010":[[764.0840598614886,1410.090156365186],[2187.598670250736,1160.7372458092868],[4132.76451244019,454.97489778790623],[1726.82415030431,844.09500437323],[507.95340829063207,326.04380941484123],[1289.1855355119333,1150.4885345930234],[2645.8522060420364,4231.107777217403],[1262.4953188933432,8.78653849940747]],
		   "2011":[[489.59440633188933,2247.0762873999774],[4463.172173243947,1121.2421675445512],[2849.7435942990705,3647.5197554100305],[4196.295161149465,3033.4515661234036],[2764.887851080857,2824.0394038148224],[1161.4083303138614,2889.1014670953155],[159.18459661770612,39.69457803759724],[1514.1952807316557,2795.2694138512015]],
		   "2012":[[1089.3385936506093,197.5389429135248],[2246.681407559663,620.5024755327031],[1445.1704265084118,1716.213988373056],[812.2350394260138,4331.397290574387],[289.4319025799632,300.8699136553332],[473.38520747143775,575.6746366387233],[4486.853401875123,971.01129591465],[140.34195675048977,3422.009986708872]],
		   "2013":[[2667.2608943190426,1488.8625657185912],[3867.3497264971957,3565.3337007388473],[3700.2257534768432,2439.238215330988],[1022.2975148353726,1755.0101521192119],[757.4749920750037,2789.4262686604634],[2.235017716884613,1798.299821675755],[3290.6921503599733,837.0679792715237],[2223.9317876519635,2711.728970403783]]};

   //generate fake set of data
   function genDataOLD(rows, sets){
   		return pv.range(rows).map(function() {
    return pv.range(sets).map(function() {
        return Math.random()*4500 ;
      });
 	 });
   }
   //generate a year with 4 quarters of fake data
   function genData(rows,sets){
   		//var q = 1;
   		var newYear = Array();
   		for(var q = 1; q<5; q+=1){
   			newYear[q] = pv.range(rows).map(function() {
		    return pv.range(sets).map(function() {
		        return Math.random()*4500 ;
		      });
		 	 });
   		}
   		return newYear;
   	
   }
</script>


<body>

<div id="wrapper">
	<div id="slidercontrol" class="protovisButtons">
	</div>

	<div id="sliderwrapD" class="protovisWrap">	
	</div>
	<div id="donut">
		
		<script type="text/javascript+protovis">
		var visSlideD = new ProtoSliderDonut(datakeys, data,  {
			dataNotation: '$', hideOuterData: true,
			outerLabel: "Outer Wedge", innerLabel: "Inner Wedge",
			slideControls: "#slidercontrol", slideDiv: "#sliderwrapD", 
			w: 400, h: 400, slideTimer: 1000 });
 		visSlideD.groupInit();


		</script>

	</div>

</div>
</body>
</html>